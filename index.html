<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YaarScript Playground | Premium Compiler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #020617;
            /* slate-950 */
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .glass {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .editor-glow:focus-within {
            box-shadow: 0 0 20px -5px rgba(56, 189, 248, 0.3);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
    </style>
</head>

<body class="text-slate-200 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="border-b border-white/10 glass sticky top-0 z-50 px-6 py-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
            <div
                class="w-10 h-10 bg-gradient-to-br from-sky-400 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-sky-500/20">
                <span class="text-white font-bold text-xl">Y</span>
            </div>
            <h1
                class="text-xl font-semibold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400">
                YaarScript <span class="text-xs font-mono text-sky-400 opacity-80 pl-1">v0.1.0</span>
            </h1>
        </div>
        <div class="flex items-center space-x-4">
            <button id="run"
                class="group relative px-6 py-2 shadow-2xl transition-all duration-300 hover:scale-105 active:scale-95">
                <div
                    class="absolute inset-0 bg-gradient-to-r from-sky-500 to-indigo-500 rounded-lg blur opacity-25 group-hover:opacity-60 transition duration-1000 group-hover:duration-200">
                </div>
                <div
                    class="relative flex items-center space-x-2 bg-slate-900 px-6 py-2 rounded-lg border border-white/10 border-sky-500/50">
                    <svg class="w-4 h-4 text-sky-400 fill-current" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z" />
                    </svg>
                    <span class="font-medium text-sky-100">Compile & Run</span>
                </div>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col lg:flex-row gap-0 overflow-hidden">

        <!-- Editor Section -->
        <section class="flex-1 flex flex-col border-r border-white/5 bg-slate-950/50">
            <div class="px-4 py-2 bg-slate-900/50 border-b border-white/5 flex items-center justify-between">
                <span class="text-xs font-medium text-slate-400 uppercase tracking-widest">Compiler Input</span>
                <div class="flex space-x-1.5">
                    <div class="w-3 h-3 rounded-full bg-red-500/20 border border-red-500/40"></div>
                    <div class="w-3 h-3 rounded-full bg-yellow-500/20 border border-yellow-500/40"></div>
                    <div class="w-3 h-3 rounded-full bg-green-500/20 border border-green-500/40"></div>
                </div>
            </div>
            <div class="flex-1 relative group editor-glow transition-all duration-500">
                <textarea id="code"
                    class="absolute inset-0 w-full h-full bg-transparent p-6 mono text-[15px] text-sky-50/90 outline-none resize-none leading-relaxed spellcheck-false"
                    placeholder="// Enter your YaarScript code here..." spellcheck="false">int main() {
    print "Hello from YaarScript! \n";
    int x = 10;
    int y = 20;
    print "The sum of ", x, " and ", y, " is: ", x + y, "\n";
    
    if (x < y) {
        print "Logic works perfect!";
    }
    return 0;
}</textarea>
            </div>
        </section>

        <!-- Output Section -->
        <section class="flex-1 lg:max-w-[40%] flex flex-col bg-[#020617]">
            <div class="px-4 py-2 bg-slate-900/50 border-b border-white/5 flex items-center">
                <span class="text-xs font-medium text-slate-400 uppercase tracking-widest">Output Terminal</span>
            </div>
            <div class="flex-1 p-6 overflow-auto border-l border-white/5">
                <pre id="output"
                    class="mono text-sm leading-6 text-slate-300 whitespace-pre-wrap selection:bg-sky-500/30">
<span class="text-slate-500 italic opacity-50 font-sans tracking-tight">// Click "Compile & Run" to see output here...</span>
            </pre>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer
        class="border-t border-white/5 bg-slate-950 px-6 py-3 flex justify-between items-center text-[11px] text-slate-500 mono">
        <div class="flex items-center space-x-4">
            <span>STATUS: <span class="text-green-500">READY</span></span>
            <span>LANG: YAARSCRIPT</span>
        </div>
        <div>
            <span>BUILD: WASM-CORE-OPTIMIZED</span>
        </div>
    </footer>

    <script type="module">
        import init, { compile_and_run } from './pkg/compiler.js';

        async function run() {
            try {
                await init();
                console.log("YaarScript Wasm Initialized Successfully.");

                const outputElement = document.getElementById('output');
                const runBtn = document.getElementById('run');

                runBtn.onclick = () => {
                    const code = document.getElementById('code').value;

                    // Visual feedback
                    outputElement.innerHTML = '<span class="text-sky-400 animate-pulse">Compiling and executing...</span>';

                    // Small delay to allow UI refresh
                    setTimeout(() => {
                        try {
                            const result = compile_and_run(code);
                            outputElement.textContent = result || "Program finished with no output.";
                        } catch (err) {
                            outputElement.innerHTML = `<span class="text-red-400">Panic: ${err}</span>`;
                        }
                    }, 50);
                };
            } catch (err) {
                document.getElementById('output').innerHTML = `<span class="text-red-500 font-bold">Wasm Init Error:</span> ${err}`;
            }
        }
        run();
    </script>
</body>

</html>